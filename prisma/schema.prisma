generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("POSTGRES_PRISMA_URL")  // 或改成 env("DATABASE_URL")，二選一
}

/* 如果你已經有 models 就保留；沒有就用這份 */
enum OrderStatus {
  PENDING
  PAID
  CANCELLED
}

model Order {
  id            String      @id @default(cuid())
  orderNo       String      @unique
  createdAt     DateTime    @default(now())
  status        OrderStatus @default(PENDING)

  customerName  String?
  customerPhone String?
  customerEmail String?
  note          String?

  subTotal Int
  shipping Int
  total    Int

  items    OrderItem[]
}

model OrderItem {
  id        String @id @default(cuid())
  order     Order  @relation(fields: [orderId], references: [id], onDelete: Cascade)
  orderId   String

  productId String
  name      String
  price     Int
  qty       Int
  image     String?
}
